# Kubernetes 基础教程

## 简介

Kubernetes 可以实现容器集群的自动化部署、自动化扩缩容、维护等功能。它拥有自动包装、自我修复、横向缩放、服务发现、负载均衡、自动部署、升级回滚、存储编排等特性。

### 架构设计

k8s 集群节点拥有 Master 和 Node 两种角色。

- Master：官方叫控制平面（Control Plane），主要负责整个集群的管控，包含监控、编排、调度集群中的各类资源对象（如 Pod/Deployment 等）。通常 Master 会占用一个单独的集群节点（不会运行应用容器），基于高可用，可能会占用多台。
- Node：数据平面。是集群中承载实际工作任务的节点，直接负责怼容器资源的控制，可以无限拓展。

![k8s架构](./img/k8s-arch.webp)

#### Master

- API Server 进程：核心组件之一，为集群中各类资源提供增删改查的 HTTP REST 接口，即操作任何资源都要经过 API Server。Master 上 kube-system 空间中运行的 Pod 之一 kube-apiserver 是 API Server 的具体实现。与其通信有三种方式：
  - 最原始的通过 REST API 访问
  - 通过官方提供的 Client 来访问，本质上也是 REST API 调用
  - 通过 kubectl 客户端访问，其本质上是将命令转换为 REST API 调用，是最主要的访问方式
- etcd：
- 调度器（Scheduler）
- 控制器管理器（kube-controller-manager）

#### Node

- kubelet
- kube-proxy
- 容器运行时
