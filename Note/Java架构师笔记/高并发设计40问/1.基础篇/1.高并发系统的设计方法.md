# 高并发

## 什么是高并发

- 高并发代表着大流量

# 处理方法

- 类比于治理河道，应对高并发也会采用类似**抵御洪水**的方法，总结来说，有三种方法：
  - Scale-out（横向拓展）：采用分布式部署的方式把流量分流开，让每个服务器都承担一部分并发和流量
  - 缓存：使用缓存来提高系统的性能，好比与「拓宽河道」的方式抵御高并发大流量的冲击
  - 异步：在某些场景下，未处理完成之前，可以让请求先返回，在数据准备好之后在通知请求方，这样**可以在单位时间内处理更多的请求**

## Scale-up（纵向拓展） VS Scale-out（横向拓展）

### 区别

- Scale-up：通过购买性能更好的硬件来提升系统的并发处理能力
- Scale-out：通过将多个低性能的机器组成一个分布式集群来共同抵御高并发流量的冲击

### 何时选择

- 在我们系统设计初期会考虑使用`Scale-up`的方式，因为这种方案足够简单，所谓能用堆砌硬件解决的问题就用硬件来解决，但是当系统并发超过了单机的极限时，我们就要使用`Scale-out`的方式。
- `Scale-out`虽然能够突破单机的限制，但也会引入一些复杂问题.
  - 如果某个节点出现故障如何保证整体可用性？
  - 当多个节点有状态需要同步时，如何保证状态信息在不同节点的一致性？
  - 如何做到使用方无感知的增加和删除节点？

## 缓存

- **我们使用缓存的主要作用是提升系统的访问性能**，那么在高并发的场景下，就可以支撑更多用户的同时访问
- 缓存的语义已经丰富了很多，我们**可以将任何降低响应时间的中间存储都称为缓存**

## 异步处理

### 那么什么是同步，什么是异步

- 同步：以方法调用为例，同步调用代表调用方要阻塞等待被调用方法中的逻辑执行完成。这种方式下，当被调用方法响应时间较长时，会造成调用方长久的阻塞，在高并发下会造成整体系统性能下降甚至发生雪崩。
- 异步：异步调用恰恰相反，调用方不需要等待方法逻辑执行完成就可以返回执行其他的逻辑，在被调用方法执行完毕后再通过回调、事件通知等方式将结果反馈给调用方。

# 总结

- 高并发系统的演进应该是循序渐进，以解决系统中存在的问题为目的和驱动力的
